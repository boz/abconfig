---
- name: install node (osx)
  homebrew:
    name: "{{item}}"
    state: present
  with_items:
    - node
    - yarn
  when: ansible_pkg_mgr == "homebrew"
  tags: [config-install,nodejs,node]

- name: install node (aur)
  pacman:
    name: "{{item}}"
  with_items:
    - nodejs
    - yarn
    - npm
  become: true
  when: ansible_pkg_mgr == "pacman"
  tags: [config-install,nodejs,node]

- name: add yarn bindir to PATH
  copy:
    dest: "{{profiledir}}/50-yarn.sh"
    content: |
      export PATH="$PATH:$HOME/.yarn/bin"
  when: ansible_pkg_mgr == "pacman"
  tags: [config-install,nodejs,node]
